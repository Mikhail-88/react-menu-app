(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{36:function(e,t,a){e.exports=a.p+"static/media/shopping-cart-solid.701d6d1d.svg"},37:function(e,t,a){e.exports=a.p+"static/media/food-bg.698e5e80.jpg"},52:function(e,t,a){e.exports=a(74)},57:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),i=a.n(c),l=a(32),u=a(47),s=a(4),m=a(33),o=a.n(m),d=(a(57),Object(n.memo)(function(e){var t=e.menuItem,a=e.onAddToCart,c=t.title,i=t.price,l=t.url,m=t.category,d=t.id,E=t.inCart,_=t.description,p=Object(n.useState)(!1),f=Object(u.a)(p,2),b=f[0],v=f[1],g=function(){v(!b)};return r.a.createElement(o.a,{isFlipped:b,flipDirection:"horizontal"},r.a.createElement("li",{className:"menu__item"},r.a.createElement("div",{className:"menu__title"},c),r.a.createElement("img",{className:"menu__img",src:l,alt:c,onClick:g}),r.a.createElement("div",{className:"menu__category"},"Category: ",r.a.createElement("span",null,m)),r.a.createElement("div",{className:"menu__price"},"Price: ",r.a.createElement("span",null,i,"$")),r.a.createElement("span",{className:"menu__category_img ".concat(m)}),r.a.createElement("div",{className:"menu__buttons"},E?r.a.createElement(s.b,{to:"/react-menu-app/cart/",className:"menu__btn menu__link"},"Go to Cart"):r.a.createElement("button",{className:"menu__btn",onClick:function(){return a()}},"Add to cart"),r.a.createElement(s.b,{to:"/react-menu-app/menu/".concat(d),className:"menu__link"},"View description"))),r.a.createElement("li",{className:"menu__item menu__item__back"},r.a.createElement("div",{className:"menu__title"},c),r.a.createElement("div",{className:"menu__description",onClick:g},_),r.a.createElement("div",{className:"menu__category"},"Category: ",r.a.createElement("span",null,m)),r.a.createElement("div",{className:"menu__price"},"Price: ",r.a.createElement("span",null,i,"$")),r.a.createElement("span",{className:"menu__category_img ".concat(m)}),r.a.createElement("div",{className:"menu__buttons"},E?r.a.createElement(s.b,{to:"/react-menu-app/cart/",className:"menu__btn menu__link"},"Go to Cart"):r.a.createElement("button",{className:"menu__btn",onClick:function(){return a()}},"Add to cart"))))},function(e,t){return e.menuItem===t.menuItem})),E=a(10),_=r.a.createContext(),p=function(){return function(e){return function(t){return r.a.createElement(_.Consumer,null,function(a){return r.a.createElement(e,Object.assign({},t,{RestoService:a}))})}}},f=function(e){return{type:"MENU_LOADED",payload:e}},b=function(){return{type:"REQUSTED"}},v=function(){return{type:"HAS_ERROR"}},g=function(e){return{type:"ADD_TO_CART",payload:e}},N=(a(63),function(){return r.a.createElement("div",{className:"loadingio-spinner-spin-1kcfyr334q1"},r.a.createElement("div",{className:"ldio-0qyrhlsmw4yp"},r.a.createElement("div",null,r.a.createElement("div",null)),r.a.createElement("div",null,r.a.createElement("div",null)),r.a.createElement("div",null,r.a.createElement("div",null)),r.a.createElement("div",null,r.a.createElement("div",null)),r.a.createElement("div",null,r.a.createElement("div",null)),r.a.createElement("div",null,r.a.createElement("div",null)),r.a.createElement("div",null,r.a.createElement("div",null)),r.a.createElement("div",null,r.a.createElement("div",null))))}),C=(a(64),function(){return r.a.createElement("div",{className:"info-block"},r.a.createElement("img",{src:"https://cdn.dribbble.com/users/381530/screenshots/3949858/404.gif",alt:"error"}),r.a.createElement("p",null,"Something goes wrong, try again later"))}),h=(a(65),{menuLoaded:f,requested:b,hasError:v,addToCart:g}),O=p()(Object(E.b)(function(e){return{menuItems:e.menu,isLoading:e.isLoading,isError:e.isError}},h)(function(e){var t=e.RestoService,a=e.menuItems,c=e.menuLoaded,i=e.requested,l=e.hasError,u=e.isLoading,s=e.isError,m=e.addToCart;Object(n.useEffect)(function(){!a.length&&(i(),t.getMenuItems().then(function(e){return c(e)}).catch(function(){return l()}))},[]);var o=s&&r.a.createElement("div",{className:"item__page"},r.a.createElement(C,null)),E=u&&r.a.createElement("div",{className:"item__page"},r.a.createElement(N,null));return o||E||r.a.createElement("ul",{className:"menu__list"},a.map(function(e){return r.a.createElement(d,{key:e.id,menuItem:e,onAddToCart:function(){return m(e.id)}})}))})),y=function(){return r.a.createElement(O,null)},k=a(77),j=a(76),I=(a(66),p()(Object(E.b)(function(e){return{itemsInCart:e.itemsInCart,isOrderTook:e.isOrderTook,isLoading:e.isLoading,isError:e.isError}},{deleteFromCart:function(e){return{type:"DELETE_FROM_CART",payload:e}},addToCart:g,clearCart:function(){return{type:"CLEAR_CART"}},requested:b,hasError:v,decreaseInCart:function(e){return{type:"DECREASE_IN_CART",payload:e}}})(function(e){var t=e.RestoService,a=e.itemsInCart,n=e.clearCart,c=e.requested,i=e.hasError,l=e.isOrderTook,u=e.deleteFromCart,m=e.addToCart,o=e.decreaseInCart,d=e.isLoading,E=e.isError&&r.a.createElement(C,null),_=d&&r.a.createElement(N,null);return a.length||l?l?r.a.createElement("div",{className:"cart__title"},"We have accepted your order!"):E||_||r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"cart__title"},"Your order:"),r.a.createElement(k.a,{className:"cart__list"},a.map(function(e){var t=e.title,a=e.price,n=e.url,c=e.id,i=e.quantity;return r.a.createElement(j.a,{key:c,timeout:500,classNames:"fade"},r.a.createElement("div",{className:"cart__item"},r.a.createElement("img",{src:n,className:"cart__item-img",alt:"Cesar salad"}),r.a.createElement("div",{className:"cart__item-title"},t),r.a.createElement("div",{className:"cart__item-details"},r.a.createElement("span",{className:"cart__item-ins"},"Price:"),r.a.createElement("span",null,a," $")),r.a.createElement("div",{className:"cart__item-details"},r.a.createElement("span",{className:"cart__item-ins"},"Quantity:"),r.a.createElement("span",null,i),r.a.createElement("div",{className:"cart__buttons"},r.a.createElement("button",{className:"cart__btn",onClick:function(){return o(c)},disabled:i<=1&&!0},"-"),r.a.createElement("button",{className:"cart__btn",onClick:function(){return m(c)}},"+"))),r.a.createElement("div",{className:"cart__item-details"},r.a.createElement("span",{className:"cart__item-ins"},"Amount:"),r.a.createElement("span",null,a*i," $")),r.a.createElement("div",{className:"cart__close",onClick:function(){return u(c)}},"\xd7")))})),r.a.createElement("button",{className:"order__btn",onClick:function(){return function(){var e;c(),t.setOrder((e=a,e.map(function(e){return{name:e.title,portions:e.quantity}}))).then(function(){return n()}).catch(function(){return i()})}()}},"Make order")):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"cart__title"},"Your cart is empty!"),r.a.createElement(s.b,{to:"/react-menu-app/",className:"order__link"},r.a.createElement("button",{className:"order__btn"},"Back to menu")))}))),T=function(){return r.a.createElement("div",{className:"cart"},r.a.createElement(I,null))},R=a(17),L=a(75),w=(a(67),{menuLoaded:f,requested:b,hasError:v,addToCart:g}),A=p()(Object(E.b)(function(e){return{menuItems:e.menu,isLoading:e.isLoading,isError:e.isError}},w)(function(e){var t=e.RestoService,a=e.menuItems,c=e.menuLoaded,i=e.requested,l=e.hasError,u=e.isLoading,m=e.isError,o=e.addToCart,d=Object(R.g)(),E=Object(R.f)(),_=a.find(function(e){return e.id===Number(d.id)}),p=m&&r.a.createElement(C,null),f=u&&r.a.createElement(N,null);return Object(n.useEffect)(function(){!a.length&&(i(),t.getMenuItems().then(function(e){return c(e)}).catch(function(){return l()}))},[]),r.a.createElement("div",{className:"item__page"},p||f||r.a.createElement("div",{className:"menu__item item__block"},r.a.createElement("div",{className:"menu__title"},_.title),r.a.createElement("img",{className:"menu__img",src:_.url,alt:_.title}),r.a.createElement("div",{className:"menu__title"},_.description),r.a.createElement("div",{className:"menu__category"},"Category: ",r.a.createElement("span",null,_.category)),r.a.createElement("div",{className:"menu__price"},"Price: ",r.a.createElement("span",null,_.price,"$")),r.a.createElement("span",{className:"menu__category_img alert ".concat(_.category)}),r.a.createElement("div",{className:"menu__buttons"},r.a.createElement(L.a,null,r.a.createElement(j.a,{key:_.inCart,addEndListener:function(e,t){return e.addEventListener("transitionend",t,!1)},classNames:"fade"},_.inCart?r.a.createElement(s.b,{to:"/react-menu-app/cart/",className:"menu__btn menu__link"},"Go to Cart"):r.a.createElement("button",{className:"menu__btn",onClick:function(){return o(_.id)}},"Add to cart"))),r.a.createElement("button",{onClick:function(){return E.goBack()},className:"menu__btn menu__link"},"Back"))))})),P=function(){return r.a.createElement(A,null)},x=a(36),S=a.n(x),q=(a(68),Object(E.b)(function(e){return{totalPrice:e.totalPrice}},null)(function(e){var t=e.totalPrice;return r.a.createElement("header",{className:"header"},r.a.createElement(s.c,{to:"/react-menu-app/",className:"header__link"},"Menu"),r.a.createElement(s.c,{to:"/react-menu-app/cart/",className:"header__link"},r.a.createElement("img",{className:"header__cart",src:S.a,alt:"cart"}),"Total: ",t," $"))})),D=a(38),M=a(37),F=a.n(M);function U(){var e=Object(l.a)(["\n    background: url(",") center center/cover no-repeat;\n"]);return U=function(){return e},e}var $=D.a.div(U(),F.a),B=function(){return r.a.createElement($,null,r.a.createElement(q,null),r.a.createElement(R.c,null,r.a.createElement(R.a,{path:"/react-menu-app/",exact:!0,component:y}),r.a.createElement(R.a,{path:"/react-menu-app/cart/",exact:!0,component:T}),r.a.createElement(R.a,{path:"/react-menu-app/menu/:id",component:P})))},G=a(23),J=a(42),Q=a(48),H=a(43),Y=a(49),z=function(e){function t(){var e,a;Object(G.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(Q.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).state={error:!1},a}return Object(Y.a)(t,e),Object(J.a)(t,[{key:"componentDidCatch",value:function(){this.setState({error:!0})}},{key:"render",value:function(){return this.state.error?r.a.createElement("div",{className:"item__page"},r.a.createElement(C,null)):this.props.children}}]),t}(n.Component),V=a(14),W=a.n(V),K=a(21),X=a(11),Z=a(46),ee=a(3),te={menu:[],itemsInCart:[],isLoading:!1,isError:!1,isOrderTook:!1,totalPrice:0},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUSTED":return Object(ee.a)({},e,{isLoading:!0});case"MENU_LOADED":return Object(ee.a)({},e,{menu:t.payload,isLoading:!1});case"HAS_ERROR":return Object(ee.a)({},e,{isError:!0,isLoading:!1});case"ADD_TO_CART":if(e.itemsInCart.some(function(e){return e.id===t.payload})){var a=e.itemsInCart.find(function(e){return e.id===t.payload}),n=Object(ee.a)({},a,{quantity:++a.quantity}),r=e.itemsInCart.map(function(e){return e.id===a.id?n:e});return Object(ee.a)({},e,{itemsInCart:r,totalPrice:e.totalPrice+n.price,isOrderTook:!1})}var c=e.menu.find(function(e){return e.id===t.payload}),i=e.menu.map(function(e){return e.id===c.id?Object(ee.a)({},e,{inCart:!0}):e});return Object(ee.a)({},e,{menu:i,itemsInCart:[].concat(Object(Z.a)(e.itemsInCart),[Object(ee.a)({},c,{quantity:1})]),totalPrice:e.totalPrice+c.price,isOrderTook:!1});case"DECREASE_IN_CART":var l=e.itemsInCart.find(function(e){return e.id===t.payload}),u=Object(ee.a)({},l,{quantity:--l.quantity}),s=e.itemsInCart.map(function(e){return e.id===l.id?u:e});return Object(ee.a)({},e,{itemsInCart:s,totalPrice:e.totalPrice-u.price});case"DELETE_FROM_CART":var m=e.itemsInCart.find(function(e){return e.id===t.payload});return Object(ee.a)({},e,{menu:e.menu.map(function(e){return e.id===m.id?Object(ee.a)({},e,{inCart:!1}):e}),itemsInCart:e.itemsInCart.filter(function(e){return e.id!==m.id}),totalPrice:e.totalPrice-m.price*m.quantity,isOrderTook:!1});case"CLEAR_CART":return Object(ee.a)({},e,{menu:e.menu.map(function(e){return Object(ee.a)({},e,{inCart:!1})}),itemsInCart:[],isOrderTook:!0,isLoading:!1,totalPrice:0});default:return e}},ne=a(44),re=a(29),ce=a(45),ie={key:"root",storage:a.n(ce).a,whitelist:["itemsInCart","totalPrice"]},le=Object(re.a)(ie,ae),ue=Object(X.d)(le,Object(X.a)(ne.a)),se=(Object(re.b)(ue),a(73),new function e(){var t=this;Object(G.a)(this,e),this._baseUrl="https://react-menu-app-e4c8b.firebaseio.com",this.getResource=function(){var e=Object(K.a)(W.a.mark(function e(a){var n;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t._baseUrl).concat(a));case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Server Error: ".concat(n.status));case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.getMenuItems=Object(K.a)(W.a.mark(function e(){return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/menu.json");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),this.getOrderNumber=Object(K.a)(W.a.mark(function e(){var a,n;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/orders.json");case 2:return a=e.sent,n=Object.values(a).length+1,e.abrupt("return",n);case 5:case"end":return e.stop()}},e)})),this.setOrder=function(){var e=Object(K.a)(W.a.mark(function e(a){var n,r,c;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getOrderNumber();case 2:return n=e.sent,r={id:n,order:a},c={method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(r)},e.next=7,fetch("".concat(t._baseUrl,"/orders.json"),c);case 7:if(e.sent.ok){e.next=10;break}throw new Error("Server error");case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()});i.a.render(r.a.createElement(E.a,{store:ue},r.a.createElement(z,null,r.a.createElement(_.Provider,{value:se},r.a.createElement(s.a,null,r.a.createElement(B,null))))),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.3fbafdfb.chunk.js.map